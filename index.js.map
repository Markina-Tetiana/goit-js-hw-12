{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["//Функція для створення розмітки\nexport function createGalleryCard({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery__item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery__image\" />\n      <div class=\"gallery__info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </a>\n        </li>`;\n}\n","//Запит на сервер та обробка відповіді\nimport axios from 'axios';\n\nexport const fetchPhotosByQuery = async (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: '48307902-b3b0ba5bf2bf175d4af253477',\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/`, axiosOptions);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGalleryCard } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderBottom = document.querySelector('.loader-bottom');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet searchedQuery = '';\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n  searchedQuery = searchFormEl.elements.user_query.value.trim();\n  if (searchedQuery === '') {\n    iziToast.error({\n      message: ' Please fill this field. The field should not be empty!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  page = 1;\n  loadMoreBtnEl.classList.add('is-hidden');\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n\n  try {\n    const data = await fetchPhotosByQuery(searchedQuery, page);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    const imageCards = data.hits.map(createGalleryCard).join('');\n    gallery.innerHTML = imageCards;\n    lightbox.refresh();\n\n    if (data.hits.length === 15 && data.totalHits > 15) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    }\n\n    scrollPage();\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction scrollPage() {\n  const cardHeight = gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onLoadMoreBtnClick() {\n  try {\n    page++;\n    loaderBottom.style.display = 'block';\n    const data = await fetchPhotosByQuery(searchedQuery, page);\n    const imageCards = data.hits.map(createGalleryCard).join('');\n    gallery.insertAdjacentHTML('beforeend', imageCards);\n\n    lightbox.refresh();\n    scrollPage();\n\n    if (data.hits.length < 15 || page >= Math.ceil(data.totalHits / 15)) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    console.error(error);\n  } finally {\n    loaderBottom.style.display = 'none';\n  }\n}\n"],"names":["createGalleryCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","error","searchFormEl","gallery","loader","loaderBottom","loadMoreBtnEl","lightbox","SimpleLightbox","page","onSearchFormSubmit","event","iziToast","data","imageCards","scrollPage","cardHeight","onLoadMoreBtnClick"],"mappings":"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"}